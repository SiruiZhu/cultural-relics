{"version":3,"sources":["interactive_map.js"],"names":["_map","_centerLat","_centerLng","_dataFile","require","_accessToken","_mapStyle","mapboxgl","accessToken","Map","container","style","center","zoom","init","addSource","type","data","addLayer","property","stops","popup","Popup","closeButton","closeOnClick","on","e","getCanvas","cursor","coordinates","features","geometry","slice","feature","detail","properties","title","name_en","era","era_en","address","province_en","classification_en","layout","Math","abs","lngLat","lng","setLngLat","setHTML","addTo","remove","once","addControl","NavigationControl","layers","colors","i","length","layer","color","item","document","createElement","key","className","backgroundColor","value","innerHTML","appendChild","legend"],"mappings":"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","file":"interactive_map.364b8401.map","sourceRoot":"../src","sourcesContent":["var _map         = null,\n        _centerLat   = 35.5,\n        _centerLng   = 105,\n\n        _dataFile    = require('./data/architecture_point_completed.geojson'),\n        _accessToken = \"pk.eyJ1Ijoiemh1c2lydWkiLCJhIjoiczRLMGhEMCJ9.37GHQC_3mSKufR5ERmXsLw\",\n        _mapStyle    = \"mapbox://styles/zhusirui/cjote0r366qqd2spcea8df8td\";\n\n    mapboxgl.accessToken = _accessToken;\n    _map = new mapboxgl.Map ({\n                               container: \"map\",\n                               style: _mapStyle,\n                               center: [_centerLng, _centerLat],\n                               zoom: 3.3\n    });\n\n    function init ()\n    {\n      _map.addSource (\"markers-source\", {\n                                         type: \"geojson\",\n                                         data: _dataFile\n      });\n\n      _map.addLayer (\n      {\n        \"id\": \"markers\",\n        \"type\": \"circle\",\n        \"source\": \"markers-source\",\n        \"paint\": {\n                  \"circle-color\":\n                  {\n                    property: \"classification_en\",\n                    type: \"categorical\",\n                    stops: [\n                        ['Ancient architecture', \"#66c2a5\"], \n                        ['Ancient ruins', \"#fc8d62\"], \n                        ['Historical buildings of modern times', \"#8da0cb\"], \n                        ['Ancient tomb', \"#e78ac3\"], \n                        ['Cave temple and stone carving', \"#a6d854\"], \n                        ['others', \"#ffd92f\"] \n                    ]\n                    },\n                   \"circle-radius\": 3.5,\n                   \"circle-stroke-width\": 0.5\n                 }\n         });\n\n// change the click to hover    \nvar popup = new mapboxgl.Popup({\n        closeButton: false,\n        closeOnClick: false\n      });\n\n\n     _map.on('mouseenter', 'markers', function(e) {\n        _map.getCanvas().style.cursor = \"default\";\n\n        var coordinates = e.features[0].geometry.coordinates.slice();\n        var feature = e.features[0]\n        \n        var detail = e.features[0].properties\n        // console.log('Detail is', detail)\n           title = e.features[0].properties.name_en\n        // console.log('Title is', title)\n           era = e.features[0].properties.era_en\n           address = e.features[0].properties.province_en\n           type = e.features[0].properties.classification_en\n\n        var layout = \"<div class='g-popup-line-1'>\" + title + \"</div>\" + \n                     \"<div class='g-popup-divider'></div>\" +\n                     \"<div class='g-popup-line-1-address'>\" + 'Province: ' + address + \"</div>\" + \n                      \"<div class='g-popup-line-1-address'>\" + 'Type: ' + type + \"</div>\" + \n                      \"<div class='g-popup-line-1-address'>\" + 'Era: ' + era + \"</div>\" + \n                      \"</div></div>\"\n        //               \"<div class='g-popup-line-2' style='width: 50%;'>RESIDENTS PER:</div>\" + \n        //               \"<div class='g-popup-line-2' style='width: 25%; text-align: right;'>AIDE</div>\" + \n        //               \"<div class='g-popup-line-2' style='width: 25%; text-align: right;'>NURSE</div>\" +\n        //               \"<div class='g-popup-divider'></div>\" +\n        //               \"<div class='.g-popup-line-container'><div class='g-popup-line-3' style='width: 50%;'>Best days</div>\" + \n        //               \"<div class='g-popup-line-3' style='width: 25%; text-align: right; font-weight: 700;'>\" + bestDayAide + \"</div>\" + \n        //               \"<div class='g-popup-line-3' style='width: 25%; text-align: right; font-weight: 700;'>\" + bestDayNurse + \"</div></div>\" +\n        //               \"<div class='.g-popup-line-container'><div class='g-popup-line-3' style='width: 50%;'>Worst days</div>\" + \n        //               \"<div class='g-popup-line-3' style='width: 25%; text-align: right; font-weight: 700;'>\" + worstDayAide + \"</div>\" + \n        //               \"<div class='g-popup-line-3' style='width: 25%; text-align: right; font-weight: 700;'>\" + worstDayNurse + \"</div></div>\";\n\n\n\n\n        while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {\n            coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;\n        }\n        // .setLngLat(_map.unproject(e.point))\n        // console.log(feature)\n        popup.setLngLat(coordinates)\n          // .setHTML(\"<h4>Relics Information</h4>\" + \n          //                     \"<table>\" + \"<tr>\" + \n          //                     \"<th>Relics Classification\" + \"</th>\" + \"<th>Relics Era\" + \"</th>\" + \"<th>Relics Detail\" + \"</th>\" + \"</tr>\" + \"<tr>\" + \n          //                     \"<td>\" + feature.properties.classification_en + \"</td>\" + \"<td>\" + feature.properties.era_en + \"</td>\" + \"<td>\" + feature.properties.add_detail + \"</td>\" + \"</tr>\" + \n          //                     \"</table>\"\n          //                    )\n          .setHTML(layout)\n          .addTo(_map);\n\n            // _map.getSource(\"highlight\").setData({ \"type\":\"circle\",\n            //                                       \"coordinates\": coordinates\n            //                                       });\n            // _map.setLayoutProperty(\"highlight\", \"visibility\", \"visible\");\n      });\n\n      _map.on('mouseout', 'markers', function() {\n        _map.getCanvas().style.cursor = '';\n        popup.remove();\n    });\n    }\n\n    _map.once (\"style.load\", function (e)\n    {\n      init ();\n      _map.addControl (new mapboxgl.NavigationControl ());\n\n\n    var layers = ['Architecture before 1912', 'Ruins', 'Architecture after 1912',\n                 'Tomb', 'Cave temple and carving','Others'];\n    var colors = [\"#66c2a5\", \"#fc8d62\", \"#8da0cb\", \"#e78ac3\", \"#a6d854\", \"#ffd92f\"];\n\n    for (i = 0; i < layers.length; i++) {\n      var layer = layers[i];\n      var color = colors[i];\n      var item = document.createElement('div');\n      var key = document.createElement('span');\n      key.className = 'legend-key';\n      key.style.backgroundColor = color;\n      var value = document.createElement('span');\n      value.innerHTML = layer;\n      item.appendChild(key);\n      item.appendChild(value);\n      legend.appendChild(item);\n    }\n\n\n    });"]}